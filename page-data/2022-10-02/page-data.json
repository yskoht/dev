{"componentChunkName":"component---src-templates-post-tsx","path":"/2022-10-02","result":{"data":{"markdownRemark":{"html":"<h1>pmdr: DI</h1>\n<p>Nest ã® DI ã¯å®Ÿè£…ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‹ã‚‰ãªã‚“ã‹é•ã†æ°—ãŒã™ã‚‹ãªã¨æ€ã£ã¦ã„ã¦ã€\nã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ¸¡ã™ã“ã¨ã‚‚ã§ãã‚‹ã‘ã©ã€<code class=\"language-text\">@Inject</code> ã§ã‚¿ã‚°ã‚’ã¤ã‘ãªã„ã¨ã„ã‘ãªã„ã€‚\nãã“ã§ abstract class ãŒä½¿ãˆã‚‹ã€‚</p>\n<ul>\n<li><a href=\"https://dev.to/ef/nestjs-dependency-injection-with-abstract-classes-4g65\">NestJS Dependency Injection with Abstract Classes - DEV Community ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»</a></li>\n</ul>\n<hr>\n<h1>pmdr: zod.brand</h1>\n<p>dayjs ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãã®ã¾ã¾ãƒ–ãƒ©ãƒ³ãƒ‰å‹ã«ã™ã‚‹ã®ãŒ <code class=\"language-text\">z.brand</code> ã ã¨ã§ããªã„ãªã¨æ€ã£ã¦ã„ãŸã‘ã©\n<code class=\"language-text\">z.instanceof(Dayjs).brand&lt;'DateType'>()</code> ã§ã§ãã‚‹ã“ã¨ã«æ°—ã¥ã„ãŸã€‚</p>\n<p>ä¾‹ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å‹ã‚’ä½œã‚‹ã¨ãã«ã€<code class=\"language-text\">UserId</code> ã‚’ä½œã£ã¦ã€</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> userIdSchema <span class=\"token operator\">=</span> z<span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token generic-function\"><span class=\"token function\">brand</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token string\">\"UserId\"</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">UserId</span> <span class=\"token operator\">=</span> z<span class=\"token punctuation\">.</span>infer<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> userIdSchema<span class=\"token operator\">></span></code></pre></div>\n<p>ãã®å¾Œ <code class=\"language-text\">User</code> å‹ã‚’ä½œã‚‹ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> userSchema <span class=\"token operator\">=</span> z<span class=\"token punctuation\">.</span><span class=\"token function\">object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  id<span class=\"token operator\">:</span> userIdSchema<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">User</span> <span class=\"token operator\">=</span> z<span class=\"token punctuation\">.</span>infer<span class=\"token operator\">&lt;</span><span class=\"token keyword\">typeof</span> userSchema<span class=\"token operator\">></span></code></pre></div>\n<p>ãƒãƒªãƒ‡ãƒ¼ãƒˆã—ãŸå¾Œã®çµæœãŒå…¥ã‚Œå­ã«ãªã£ã¦ã„ã¦ã‚‚ã€ã¡ã‚ƒã‚“ã¨ãƒ–ãƒ©ãƒ³ãƒ‰å‹ã«ãªã£ã¦ã„ã¦ä¾¿åˆ©ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> userSchema<span class=\"token punctuation\">.</span><span class=\"token function\">safeParse</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>result<span class=\"token punctuation\">.</span>success<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"validation error\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> user<span class=\"token operator\">:</span> User <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>data\n<span class=\"token keyword\">const</span> userId<span class=\"token operator\">:</span> UserId <span class=\"token operator\">=</span> user<span class=\"token punctuation\">.</span>id</code></pre></div>","fields":{"slug":"/2022-10-02"}}},"pageContext":{"slug":"/2022-10-02","prevSlug":"/2022-09-25","nextSlug":"/2022-10-15"}},"staticQueryHashes":["63159454"]}