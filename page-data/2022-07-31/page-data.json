{"componentChunkName":"component---src-templates-post-tsx","path":"/2022-07-31","result":{"data":{"markdownRemark":{"html":"<h1>pmdr: suspense</h1>\n<p>あるコンポーネントが suspense しているときに、別コンポーネントの状態を変えたい。\n例えば、</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">A</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span><span class=\"token constant\">B</span>' <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">B</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">B</code> が fallback しているときに <code class=\"language-text\">A</code> の状態を変えたい、みたいなことがあった。\n最終的には回避する方法を考えたけれどうまく実装する方法はあるんだろうか。</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Suspense</span></span> <span class=\"token attr-name\">fallback</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    &lt;A' />\n    &lt;B' />\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">A</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">B</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Suspense</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<hr>\n<h1>pmdr: mui の theme</h1>\n<p>Theme の色を使う方法がわかった。</p>\n<p>CSS は Emotion を使っているが、mui のコンポーネントは <code class=\"language-text\">css</code> に <code class=\"language-text\">Theme</code> を渡してくれる。</p>\n<p><code class=\"language-text\">Theme</code> の型は <code class=\"language-text\">any</code> にしないといけなかった。</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Paper <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@mui/material\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Component</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Paper</span></span> <span class=\"token attr-name\">css</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>style<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Paper</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> css<span class=\"token punctuation\">,</span> SerializedStyles <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@emotion/react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Theme <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@mui/material\"</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Style</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>theme<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> SerializedStyles\n<span class=\"token keyword\">const</span> style<span class=\"token operator\">:</span> <span class=\"token function-variable function\">Style</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> palette <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Theme<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token function\">css</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    backgroundColor<span class=\"token operator\">:</span> palette<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>型も以下で追加できた。</p>\n<p><a href=\"https://mui.com/material-ui/customization/palette/#adding-new-colors\">Palette - Material UI</a></p>","fields":{"slug":"/2022-07-31"}}},"pageContext":{"slug":"/2022-07-31","prevSlug":"/2022-07-29","nextSlug":"/2022-08-01"}},"staticQueryHashes":["63159454"]}