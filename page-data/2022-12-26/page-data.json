{"componentChunkName":"component---src-templates-post-tsx","path":"/2022-12-26","result":{"data":{"markdownRemark":{"html":"<h1>haskell: モナドとしての関数</h1>\n<p>『すごい Haskell 楽しく学ぼう！』の P330 について考えたことのメモ。</p>\n<p>まず、Monad は</p>\n<div class=\"gatsby-highlight\" data-language=\"hs\"><pre class=\"language-hs\"><code class=\"language-hs\"><span class=\"token hvariable\">ghci</span><span class=\"token operator\">></span> <span class=\"token operator\">:</span><span class=\"token hvariable\">info</span> <span class=\"token constant\">Monad</span>\n<span class=\"token keyword\">type</span> <span class=\"token constant\">Monad</span> <span class=\"token operator\">::</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span> <span class=\"token operator\">-></span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token constant\">Constraint</span>\n<span class=\"token keyword\">class</span> <span class=\"token constant\">Applicative</span> <span class=\"token hvariable\">m</span> <span class=\"token operator\">=></span> <span class=\"token constant\">Monad</span> <span class=\"token hvariable\">m</span> <span class=\"token keyword\">where</span>\n  <span class=\"token punctuation\">(</span><span class=\"token operator\">>>=</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">::</span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">b</span>\n  <span class=\"token punctuation\">(</span><span class=\"token operator\">>></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">::</span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">b</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">b</span>\n  <span class=\"token builtin\">return</span> <span class=\"token operator\">::</span> <span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">m</span> <span class=\"token hvariable\">a</span>\n  <span class=\"token comment\">{-# MINIMAL (>>=) #-}</span>\n        <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">Either</span> <span class=\"token hvariable\">e</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- Defined in ‘Data.Either’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token punctuation\">[</span><span class=\"token hvariable\">safe</span><span class=\"token punctuation\">]</span> <span class=\"token constant\">Monad</span> <span class=\"token hvariable\">m</span> <span class=\"token operator\">=></span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">StateT</span> <span class=\"token hvariable\">s</span> <span class=\"token hvariable\">m</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">-- Defined in ‘transformers-0.5.6.2:Control.Monad.Trans.State.Lazy’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token constant\">Solo</span> <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token constant\">Maybe</span> <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token constant\">IO</span> <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-></span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">Monoid</span> <span class=\"token hvariable\">a</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Monoid</span> <span class=\"token hvariable\">b</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Monoid</span> <span class=\"token hvariable\">c</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">a</span> <span class=\"token hvariable\">b</span> <span class=\"token hvariable\">c</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token punctuation\">(</span><span class=\"token constant\">Monoid</span> <span class=\"token hvariable\">a</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">Monoid</span> <span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">a</span> <span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">-- Defined in ‘GHC.Base’</span>\n<span class=\"token keyword\">instance</span> <span class=\"token constant\">Monoid</span> <span class=\"token hvariable\">a</span> <span class=\"token operator\">=></span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">a</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- Defined in ‘GHC.Base’</span></code></pre></div>\n<p><code class=\"language-text\">Monad ((->) r)</code> は <code class=\"language-text\">GHC.Base</code> に定義されていると書かれている。</p>\n<p><a href=\"https://github.com/ghc/ghc/blob/a5bd0eb8dd1d03c54e1b0b476ebbc4cc886d6f19/libraries/base/GHC/Base.hs#L1098-L1099\">https://github.com/ghc/ghc/blob/a5bd0eb8dd1d03c54e1b0b476ebbc4cc886d6f19/libraries/base/GHC/Base.hs#L1098-L1099</a></p>\n<div class=\"gatsby-highlight\" data-language=\"hs\"><pre class=\"language-hs\"><code class=\"language-hs\"><span class=\"token keyword\">instance</span> <span class=\"token constant\">Monad</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-></span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">where</span>\n    <span class=\"token hvariable\">f</span> <span class=\"token operator\">>>=</span> <span class=\"token hvariable\">k</span> <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span> <span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">k</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">f</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span></code></pre></div>\n<p>本と記号が違うけど同じ。（<code class=\"language-text\">return</code> が書かれてない。なぜ。）</p>\n<p><code class=\"language-text\">(>>=) :: m a -> (a -> m b) -> m b</code> と見比べると、\n<code class=\"language-text\">f</code>　が <code class=\"language-text\">m a</code>、<code class=\"language-text\">k</code> が <code class=\"language-text\">a -> m b</code>。</p>\n<p><code class=\"language-text\">return</code> は本によると <code class=\"language-text\">return x = \\_ -> x</code>。\n<code class=\"language-text\">return :: a -> m a</code> と見比べると <code class=\"language-text\">\\_ -> x</code> が <code class=\"language-text\">ma</code>。\nなので、関数モナドは <code class=\"language-text\">\\_ -> x</code> のような形をしていて、たぶん <code class=\"language-text\">m a</code> を評価すると <code class=\"language-text\">a</code> になる（？）</p>\n<p><code class=\"language-text\">f >>= k</code> に戻ると、<code class=\"language-text\">k</code> は <code class=\"language-text\">a</code> を取る関数なので、<code class=\"language-text\">ma</code> から <code class=\"language-text\">a</code> を取り出さないといけない。\nそのために、<code class=\"language-text\">f r</code> をする。この型は <code class=\"language-text\">a</code> になる。\n<code class=\"language-text\">k</code> は <code class=\"language-text\">a -> m b</code> なので、<code class=\"language-text\">k (f r)</code> は <code class=\"language-text\">m b</code> を返す。これは関数（<code class=\"language-text\">m b</code> だから）。\n最後に <code class=\"language-text\">k (f r)</code> に <code class=\"language-text\">r</code> を適用するようになっている。最終的には <code class=\"language-text\">f >>= k = \\ r -> k (f r) r</code>。</p>\n<p>例えば、 <code class=\"language-text\">(return 3) >>= (\\x -> \\y -> x * 2 + y)</code> を考えると\n（<code class=\"language-text\">(return 3)</code> が <code class=\"language-text\">f</code>、 <code class=\"language-text\">(\\x -> \\y -> x * 2 + y)</code> が <code class=\"language-text\">k</code>）、</p>\n<div class=\"gatsby-highlight\" data-language=\"hs\"><pre class=\"language-hs\"><code class=\"language-hs\"><span class=\"token builtin\">return</span> <span class=\"token number\">3</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">x</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">y</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">x</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">y</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">_</span> <span class=\"token operator\">-></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">x</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">y</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">x</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">y</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">x</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">y</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">x</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">y</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">_</span> <span class=\"token operator\">-></span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span>\n<span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">x</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">y</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">x</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">y</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span> <span class=\"token hvariable\">r</span>\n<span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">y</span> <span class=\"token operator\">-></span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">y</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span>\n<span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">y</span> <span class=\"token operator\">-></span> <span class=\"token number\">6</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">y</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span>\n<span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token number\">6</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">r</span></code></pre></div>\n<p>結局のところ、<code class=\"language-text\">return 3</code>に <code class=\"language-text\">r</code> をいれて評価すると <code class=\"language-text\">3</code>。 これが <code class=\"language-text\">x</code> になる。\n<code class=\"language-text\">\\y -> x * 2 + y</code> に <code class=\"language-text\">r</code> をいれて評価すると <code class=\"language-text\">\\r -> x * 2 + r</code>。\n<code class=\"language-text\">x = 3</code> なので、<code class=\"language-text\">\\r -> 6 + r</code>。</p>\n<hr>\n<h1>haskell: Reader モナド</h1>\n<p>『すごい Haskell 楽しく学ぼう！』の P331 について考えたことのメモ。</p>\n<div class=\"gatsby-highlight\" data-language=\"hs\"><pre class=\"language-hs\"><code class=\"language-hs\"><span class=\"token hvariable\">addStuff</span> <span class=\"token operator\">::</span> <span class=\"token constant\">Int</span> <span class=\"token operator\">-></span> <span class=\"token constant\">Int</span>\n<span class=\"token hvariable\">addStuff</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">do</span>\n  <span class=\"token hvariable\">a</span> <span class=\"token operator\">&lt;-</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token hvariable\">b</span> <span class=\"token operator\">&lt;-</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">+</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n  <span class=\"token builtin\">return</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>これは do 構文 を使わずに書くと、</p>\n<div class=\"gatsby-highlight\" data-language=\"hs\"><pre class=\"language-hs\"><code class=\"language-hs\"><span class=\"token hvariable\">addStuff</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">+</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">b</span> <span class=\"token operator\">-></span> <span class=\"token builtin\">return</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">+</span> <span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>展開していくと、</p>\n<div class=\"gatsby-highlight\" data-language=\"hs\"><pre class=\"language-hs\"><code class=\"language-hs\"><span class=\"token hvariable\">addStuff</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">+</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">b</span> <span class=\"token operator\">-></span> <span class=\"token builtin\">return</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">--                         ~~~~~     ~~~~~~~~~~~~~~~~~~~~~~</span>\n<span class=\"token comment\">--                        f :: m a    k :: (a -> mb) と置くと、</span>\n\n         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">k</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">f</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span>\n         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">k</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">r</span><span class=\"token operator\">+</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- r+10 は b</span>\n         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">k</span> <span class=\"token hvariable\">b</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span>\n         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token builtin\">return</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span>\n         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">_</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span>\n         <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">>>=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">--         ~~~~     ~~~~~~~~~~~~~~~~~~~</span>\n<span class=\"token comment\">--      g :: m a    h :: (a -> mb) と置くと、</span>\n\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">h</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">g</span> <span class=\"token hvariable\">r</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span>\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">h</span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">r</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span> <span class=\"token comment\">-- r*2 は a</span>\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">h</span> <span class=\"token hvariable\">a</span> <span class=\"token hvariable\">r</span>\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">a</span> <span class=\"token operator\">-></span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">a</span> <span class=\"token hvariable\">r</span>\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span><span class=\"token punctuation\">)</span> <span class=\"token hvariable\">r</span>\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token hvariable\">a</span><span class=\"token operator\">+</span><span class=\"token hvariable\">b</span>\n         <span class=\"token operator\">=</span> <span class=\"token operator\">\\</span><span class=\"token hvariable\">r</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">(</span><span class=\"token hvariable\">r</span><span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span><span class=\"token hvariable\">r</span><span class=\"token operator\">+</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>1 つ目の <code class=\"language-text\">>>=</code> と 2 つ目の <code class=\"language-text\">>>=</code> で同じ <code class=\"language-text\">r</code> を使うというところが、本当のところあんまりよくわからない。</p>","fields":{"slug":"/2022-12-26"}}},"pageContext":{"slug":"/2022-12-26","prevSlug":"/2022-12-25","nextSlug":null}},"staticQueryHashes":["63159454"]}