# pmdr: DI

Nest ã® DI ã¯å®Ÿè£…ã‚’å‚ç…§ã—ã¦ã„ã‚‹ã‹ã‚‰ãªã‚“ã‹é•ã†æ°—ãŒã™ã‚‹ãªã¨æ€ã£ã¦ã„ã¦ã€
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æ¸¡ã™ã“ã¨ã‚‚ã§ãã‚‹ã‘ã©ã€`@Inject` ã§ã‚¿ã‚°ã‚’ã¤ã‘ãªã„ã¨ã„ã‘ãªã„ã€‚
ãã“ã§ abstract class ãŒä½¿ãˆã‚‹ã€‚

- [NestJS Dependency Injection with Abstract Classes \- DEV Community ğŸ‘©â€ğŸ’»ğŸ‘¨â€ğŸ’»](https://dev.to/ef/nestjs-dependency-injection-with-abstract-classes-4g65)

---

# pmdr: zod.brand

dayjs ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ãã®ã¾ã¾ãƒ–ãƒ©ãƒ³ãƒ‰å‹ã«ã™ã‚‹ã®ãŒ `z.brand` ã ã¨ã§ããªã„ãªã¨æ€ã£ã¦ã„ãŸã‘ã©
`z.instanceof(Dayjs).brand<'DateType'>()` ã§ã§ãã‚‹ã“ã¨ã«æ°—ã¥ã„ãŸã€‚

ä¾‹ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å‹ã‚’ä½œã‚‹ã¨ãã«ã€`UserId` ã‚’ä½œã£ã¦ã€

```ts
const userIdSchema = z.string().brand<"UserId">()
type UserId = z.infer<typeof userIdSchema>
```

ãã®å¾Œ `User` å‹ã‚’ä½œã‚‹ã€‚

```ts
const userSchema = z.object({
  id: userIdSchema,
})
type User = z.infer<typeof userSchema>
```

ãƒãƒªãƒ‡ãƒ¼ãƒˆã—ãŸå¾Œã®çµæœãŒå…¥ã‚Œå­ã«ãªã£ã¦ã„ã¦ã‚‚ã€ã¡ã‚ƒã‚“ã¨ãƒ–ãƒ©ãƒ³ãƒ‰å‹ã«ãªã£ã¦ã„ã¦ä¾¿åˆ©ã€‚

```ts
const result = userSchema.safeParse(v)
if (!result.success) {
  throw new Error("validation error")
}

const user: User = result.data
const userId: UserId = user.id
```
